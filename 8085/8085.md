<p align="right">
<kbd>
<a href="https://github.com/Sid-WC121/Microprocessor-and-Microcontroller" >Main</a><br>
</kbd>
<kbd>
<a href="https://github.com/Sid-WC121/Microprocessor-and-Microcontroller/blob/main/assembly/ASSEMBLY.md" >next (8085 Assembly)</a>
</kbd>
</p>

<br>
<h1 align="center"> INTRODUCTION TO 8085-MICROPROCESSOR </h1>
<h2> :sparkle: <em>8085 Architecture</em> </h2>

<p align="center">
<img src="/8085/8085-Microprocessor.png" style="height: 500px; width:800px;"/>
</p>

<br>
<h3> Arithmetic and Logic Unit (ALU)</h3>
  
- It is a circuit that performs arithmetic and logical operations on data, including addition, subtraction, comparison, shifting, and logical operations. It works with the Accumulator and two temporary registers (W and Z) to hold data temporarily during operations.

<br>
<h3>Registers</h3>

- Registers are small memory elements within the CPU that provide temporary storage for data, instructions, and addresses during execution. They are directly connected to the processor for quick access without delays. The number of registers varies between processors. In the Intel 8085, there are 8 registers, including the Accumulator (A register), the flag register and 6 general-purpose registers (B, C, D, E, H, and L), arranged as a register array. Each register can be used as an 8-bit register to store 8-bit data or paired with another register to store 16-bit data. The HL register pair, known as the Memory Address Register (MAR) or Memory Pointer, is used to store memory addresses.

<p align="center">
<img src="/8085/register1.png" style="height: 400px; width:700px;"/>
</p>

<br>
<p align="center">
<img src="/8085/register2.png" style="height: 300px; width:500px;"/>
</p>

>M register is a memory location to be accessed, whose address is given in the HL register pair

<br>
<h3>Accumulator (A)</h3>

- The Accumulator (A) is an 8-bit register in the 8085 microprocessor used for arithmetic and logical operations. It is the primary register for performing arithmetic operations and storing intermediate results/ result of an operation.

<br>
<h3>Flags / Status Register</h3>

- Five bits or flip-flops of status register are labelled as S (Sign), Z (Zero), AC (Auxiliary Carry), P (Parity) and CY (Carry), are known as status flag. The role of this register is to exhibit the status of result generated by the ALU, by recording different logical conditions. 

<br>
<p align="center">
<img src="/8085/statusregister.png" style="height: 300px; width:500px;"/>
</p>

1. **Sign Flag (S)**: This flag is set if the result of an arithmetic or logical operation has a negative value. The Sign Flag is affected by the most significant bit (MSB) of the result. If the MSB is 1, indicating a negative result in the signed 2's complement representation, the Sign Flag is set to 1.

2. **Zero Flag (Z)**: This flag is set if the result of an operation is zero. When all the bits of the result are 0, the Zero Flag is set to 1, indicating that the result is zero.

3. **Auxiliary Carry Flag (AC)**: This flag is used in BCD (Binary Coded Decimal) arithmetic operations. It is set when a carry-out occurs from the low nibble (4 bits) to the high nibble during arithmetic operations. It is helpful for handling BCD arithmetic and decimal adjustments.

4. **Parity Flag (P)**: The Parity Flag is set if the result of an operation has even parity, which means it contains an even number of 1's in its binary representation. If the result has even parity, the Parity Flag is set to 1; otherwise, it is set to 0.

5. **Carry Flag (CY)**: This flag is set when there is a carry-out from the most significant bit during arithmetic operations. In an addition operation, if the sum exceeds the capacity of the 8-bit register (255 in decimal or 1111 1111 in binary), a carry-out occurs, and the Carry Flag is set to 1. Similarly, in subtraction operations, the Carry Flag is set if a borrow is required.

>These status flags are crucial for conditional branching instructions (conditional jumps) and to determine the outcome of various conditional operations. Program control and decision-making rely on these flags, allowing the microprocessor to execute different instructions based on the status of the previous operation.

<br>
<h3>Stack Pointer (SP)</h3>

The Stack Pointer (SP) is a 16-bit register in the 8085 microprocessor that plays a crucial role in managing stack operations. The stack is a region of memory used to store data temporarily, especially during subroutine calls and interrupts. The Stack Pointer keeps track of the top of the stack, which is the memory location where the last value was pushed onto the stack.

**Stack Operations**:
- The stack operates in a Last-In-First-Out (LIFO) manner, meaning that the last value pushed onto the stack is the first one to be popped off. The SP points to the memory location where the next value will be pushed.

**Stack Push Operation**:
- When data needs to be saved on the stack, it is pushed onto the memory location pointed by the Stack Pointer (SP).
- After the data is pushed, the SP is decremented by 1 (for an 8-bit stack) or 2 (for a 16-bit stack) to point to the next available memory location on the stack.

**Stack Pop Operation**:
- When data is required to be retrieved from the stack, the SP is first incremented by 1 (or 2 for a 16-bit stack) to point to the memory location where the data was last pushed.
- The data is then popped from that location, and the SP is updated to point to the next available data on the stack.

**Stack Usage**:
- The stack is used for various purposes, including storing return addresses during subroutine calls, preserving register values in interrupt service routines, and saving the context of the program during context switches for multitasking systems.

**Interrupt Handling**:
- When an interrupt occurs, the 8085 microprocessor automatically saves the current Program Counter (PC) value on the stack. This allows the microprocessor to return to the interrupted program once the interrupt service routine is completed.

**Stack Size**:
- The stack size depends on the memory available in the system. In the 8085 microprocessor, the stack size can go up to 64KB (with a 16-bit SP), provided that the memory addresses are properly managed.

The Stack Pointer is a critical component of the 8085 microprocessor's architecture, enabling efficient memory management during program execution, subroutine calls, and interrupt handling.


<br>
<h3>Instruction Register (IR)</h3>

The Instruction Register (IR) is an 8-bit register in the 8085 microprocessor that temporarily holds the instruction fetched from memory during the instruction fetching phase for processing.

Steps of instruction fetching, decoding, and executing in the context of the Instruction Register (IR):

1. **Instruction Fetching** (Fetch Cycle):
   - During the fetch cycle, the Control and Timing Unit initiates the process by generating the necessary signals.
   - The Program Counter (PC) holds the memory address of the next instruction to be executed.
   - The PC value is placed on the memory address bus, indicating the memory location from which the instruction should be fetched.
   - The memory responds by sending the opcode of the instruction to the data bus.
   - The Control and Timing Unit fetches the opcode from the data bus and loads it into the Instruction Register (IR).
   - At this stage, the IR holds the opcode, which represents the operation to be performed.

2. **Instruction Decoding**:
   - After the opcode is loaded into the IR, the instruction decoding process begins.
   - The instruction decoder unit reads the contents of the IR and interprets the opcode to determine the specific operation and addressing mode associated with the instruction.
   - The decoder unit recognizes the opcode and produces control signals based on its interpretation.
   - These control signals inform the control unit about the type of instruction and the subsequent steps required for execution.

3. **Instruction Execution**:
   - Once the instruction has been decoded, the control unit generates the necessary control signals to execute the instruction.
   - The control signals enable the appropriate data transfer and processing operations based on the specific instruction.
   - For example, if the instruction involves data transfer, the control unit may initiate memory read or write operations to move data between memory and registers.
   - If the instruction involves arithmetic or logical operations, the control unit activates the necessary circuits in the Arithmetic and Logic Unit (ALU) to perform the desired computation.
   - The result of the operation is then stored in the destination specified by the instruction, such as a register or memory location.

<br>
<h3>Program Counter (PC)</h3>

The Program Counter (PC) is a 16-bit register in the 8085 microprocessor that holds the memory address of the next instruction to be fetched and executed. It plays a critical role in controlling the sequence of instruction execution and maintaining the flow of the program.By manipulating the PC, branching, looping, and interrupt handling can be achieved, enabling the microprocessor to execute different instructions based on program logic and external events.

Here's how the Program Counter works:

1. **Initial Value**: When the microprocessor starts executing a program, the PC is set to the memory address of the first instruction to be executed. It points to the location in memory from which the first instruction should be fetched.

2. **Incrementing**: After each instruction fetch, the PC is incremented by the number of bytes used by the instruction. This ensures that the PC points to the next instruction in memory.

3. **Branching/Jumping**: The PC can also be modified during program execution to implement branching or jumping. For example, conditional branch instructions or subroutine calls can modify the PC to redirect the program's flow to a different memory location.

4. **Fetching Instructions**: During the fetch cycle, the Control and Timing Unit generates the necessary signals to place the contents of the PC on the memory address bus. This indicates the memory location from which the instruction should be fetched.

5. **Instruction Execution**: Once the instruction is fetched and stored in the Instruction Register (IR), the opcode is decoded, and the appropriate control signals are generated for instruction execution. The PC is then updated based on the instruction's effect on program flow.

6. **Interrupt Handling**: In response to an interrupt, the microprocessor saves the current value of the PC on the stack to resume program execution after servicing the interrupt. Once the interrupt is handled, the PC is restored from the stack to continue executing the interrupted program.

7. **Looping**: The PC can be used to implement loops in the program. By modifying the PC within a loop, the microprocessor can repeat a sequence of instructions until a specified condition is met.

<br>
<h3>Control Unit</h3>

The Control Unit is responsible for generating signals on the data bus, address bus, and control bus within the microprocessor to carry out instructions that have been decoded.The Control Unit's efficient management of these buses and their timing ensures the proper execution of instructions, data transfer, and coordination of the microprocessor's various operations. It enables the microprocessor to perform complex tasks by carrying out instructions in a well-organized and controlled manner.These buses and their timing play a crucial role in transmitting data, addresses, and control signals between the microprocessor and external units like memory and I/O devices. Let's understand each bus and its characteristics:

1. **Data Bus**:
   - The Data Bus is a bidirectional bus that carries data in binary form between the microprocessor and external units, such as memory or I/O devices.
   - In the 8085 microprocessor, the data bus is 8-bit wide, meaning it can transmit 8 binary digits at a time, identified as D0 to D7.
   - It is used to transmit information, results of arithmetic operations, and other data between memory and the microprocessor.
   - The data bus width affects the size of data that can be processed at once. In an 8-bit data bus, the largest number that can be represented is 11111111 (255 in decimal).
   - When larger numbers need to be processed, they have to be broken down into smaller chunks of 255, which can slow down the microprocessor.

2. **Address Bus**:
   - The Address Bus is a unidirectional bus that carries memory addresses from the microprocessor to memory or other devices.
   - In the 8085 microprocessor, the address bus is 16-bit wide, identified as A0 to A15.
   - The higher-order address lines (A8 to A15) are unidirectional, while the lower-order lines (A0 to A7) are multiplexed (time-shared) with the data bus (D0 to D7), making them bidirectional.
   - The address bus enables the microprocessor to access specific memory locations and devices for data read or write operations.

3. **Control Bus**:
   - The Control Bus carries various control signals that coordinate and control microprocessor operations.
   - Some control signals are unidirectional, while others are bidirectional.
   - The following control and status signals are used by the 8085 microprocessor:
     - ALE (Address Latch Enable, output): A pulse that indicates an address is available on the AD0 to AD7 lines.
     - RD (Read, active low output): Indicates that data is being read from the selected I/O or memory device and is available on the data bus.
     - WR (Write, active low output): Indicates that data on the data bus is to be written into a selected memory or I/O location.
     - IO/M (input/output, output): Distinguishes between memory and I/O operations. When IO/M = 0, it is a memory operation, and when IO/M = 1, it is an I/O operation.
     - S1 and S0 (Status signals, output): Used to specify the type of operation being performed.



<br>
<h3>8085-Bus Structure</h3>
<p align="center">
<img src="/8085/8085-BusStructure.png" style="height: 300px; width:500px;"/>
</p>

<br>
<h3>8085-Pinout</h3>
<p align="center">
<img src="/8085/8085pinout.png" style="height: 400px; width:600px;"/>
</p>

**Address and Data Buses**:

- **A8 - A15** (output, 3-state): These are the most significant eight bits of the memory addresses and the eight bits of the I/O addresses. They enter a tri-state high-impedance state during HOLD and HALT modes, meaning they release the bus and remain inactive in those modes.

- **AD0 - AD7** (input/output, 3-state): These lines handle the lower significant bits of memory addresses during the first clock cycle and the eight bits of the I/O addresses. During the third and fourth clock cycles, they function as the data bus, carrying data between the microprocessor and memory or I/O devices. Similar to A8 - A15, AD0 - AD7 enter a tri-state high-impedance state during HOLD and HALT modes.

**Control & Status Signals**:

- **ALE (Address Latch Enable)**: ALE is a pulse signal provided by the microprocessor when an address appears on the AD0 - AD7 lines. After the pulse, ALE returns to a low state.

- **RD (Read control signal)**: RD is an active-low output signal that indicates a read operation from the selected I/O or memory device. When RD is active, data is available on the data bus.

- **WR (Write control signal)**: WR is an active-low output signal used to initiate a write operation into a selected memory or I/O location.

- **IO/M, S1, and S0 (Status signals)**: These status signals specify the type of operation being performed. When IO/M = 0, it is a memory operation, and when IO/M = 1, it is an I/O operation. S1 and S0 together specify the specific operation.

**Power Supply & Clock Frequency**:

- **Vcc**: This is the +5 V power supply input.

- **Vss**: This is the ground reference pin.

- **X1, X2**: A crystal with a frequency of 6 MHz is connected to these two pins, providing the microprocessor's clock source.

- **CLK**: This is the clock output generated by the microprocessor, which can be used to synchronize other devices.

**Externally Initiated and Interrupt Signals**:

- **RESET IN**: When the signal on this pin is low, the microprocessor is reset. The Program Counter (PC) is set to 0, buses are tri-stated, and the processor is reset.

- **RESET OUT**: This signal indicates that the microprocessor is being reset and can be used to reset other devices.

- **READY**: When this signal is low, the microprocessor waits for an integral number of clock cycles until it goes high, indicating that the microprocessor is ready to process the next instruction.

- **HOLD**: This signal indicates that an external peripheral, such as a DMA controller, is requesting the use of the address and data buses.

- **HLDA**: This signal acknowledges the HOLD request.

- **INTR**: This is a general-purpose interrupt request signal.

- **INTA**: INTA is used to acknowledge an interrupt.

- **RST 7.5, RST 6.5, RST 5.5**: These are vectored interrupts and have higher priority than the INTR interrupt.

- **TRAP**: This is a non-maskable interrupt and has the highest priority.

**Serial I/O Signals**:

- **SID (Serial input signal)**: The bit on this line is loaded into D7 bit of register A using the RIM instruction.

- **SOD (Serial output signal)**: SOD is set or reset by using the SIM instruction.

These signals and buses control and facilitate the operation of the 8085 microprocessor, allowing it to fetch, decode, and execute instructions while interfacing with external devices and peripherals.

<p align="right">
<kbd>
<a href="https://github.com/Sid-WC121/Microprocessor-and-Microcontroller" >Main</a><br>
</kbd>
<kbd>
<a href="https://github.com/Sid-WC121/Microprocessor-and-Microcontroller/blob/main/assembly/ASSEMBLY.md" >next (8085 Assembly)</a>
</kbd>
</p>
